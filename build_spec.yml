version: 0.1
component: build
timeoutInSeconds: 900
runAs: root
shell: bash

steps : 
  - type: Command
    name: "Ruby Build Source 1"
    timeoutInSeconds: 600
    command: |
       chmod +x app.rb
       echo "Ruby version is $(ruby -v)"
       echo "Installing Bundler"
       gem install bundler
       bundle install 
       echo "Ready to execute"
       ruby app.rb > result.txt
       echo "Exiting"
    onFailure:
      - type: Command
        command: |
          echo "Excecution failed"
        timeoutInSeconds: 600
        runAs: root


outputArtifacts:
  - name: OUTPUT
    type: BINARY
    location: app.rb
  - name: TEXT_OUTPUT
    type: BINARY
    location: result.txt
